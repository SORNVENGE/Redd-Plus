jQuery(document).ready(function(e){var f=e(".mailster-conditions"),b=e(".mailster-condition-group"),c=e(".mailster-condition");b.eq(0).appendTo(e(".mailster-condition-container"));d();e(".mailster-conditions-thickbox").on("click",".add-condition",function(){var i=b.length,h=b.eq(0).clone();h.removeAttr("id").appendTo(f).data("id",i);e.each(h.find("input, select"),function(){var k=e(this),j=k.attr("name");k.attr("name",j.replace(/\[\d+\]/,"["+i+"]")).prop("disabled",false)});h.find(".condition-field").val("").focus();d();b=e(".mailster-condition-group");c=e(".mailster-condition")}).on("click",".add-or-condition",function(){var h=e(this).parent(),j=h.find(".mailster-condition").last().data("id"),i=c.eq(0).clone();i.removeAttr("id").appendTo(h).data("id",++j);e.each(i.find("input, select"),function(){var l=e(this),k=l.attr("name");l.attr("name",k.replace(/\[\d+\]\[\d+\]/,"["+h.data("id")+"]["+j+"]")).prop("disabled",false)});i.find(".condition-field").val("").focus();d();c=e(".mailster-condition")}).on("click",".close",function(){tb_remove()});f.on("click",".remove-condition",function(){var h=e(this).parent();if(h.parent().find(".mailster-condition").length==1){h=h.parent()}h.slideUp(100,function(){e(this).remove();a("updateCount")})}).on("change",".condition-field",function(){var i=e(this).closest(".mailster-condition"),h=e(this).val();i.find("div.mailster-conditions-value-field").removeClass("active").find(".condition-value").prop("disabled",true);i.find("div.mailster-conditions-operator-field").removeClass("active").find(".condition-operator").prop("disabled",true);if(!i.find('div.mailster-conditions-value-field[data-fields*=",'+h+',"]').addClass("active").find(".condition-value").prop("disabled",false).length){i.find("div.mailster-conditions-value-field-default").addClass("active").find(".condition-value").prop("disabled",false)}if(!i.find('div.mailster-conditions-operator-field[data-fields*=",'+h+',"]').addClass("active").find(".condition-operator").prop("disabled",false).length){i.find("div.mailster-conditions-operator-field-default").addClass("active").find(".condition-operator").prop("disabled",false)}a("updateCount")}).on("change",".condition-operator",function(){a("updateCount")}).on("change",".condition-value",function(){a("updateCount")}).on("click",".mailster-condition-add-multiselect",function(){e(this).parent().clone().insertAfter(e(this).parent()).find(".condition-value").select().focus()}).on("change",".mailster-conditions-value-field-multiselect > .condition-value",function(){if(0==e(this).val()&&e(this).parent().parent().find(".condition-value").size()>1){e(this).parent().remove()}}).on("click",".mailster-rating > span",function(j){var k=e(this),h=k.prevAll(),i=k.siblings();i.removeClass("enabled");h.add(k).addClass("enabled");k.parent().parent().find(".condition-value").val((h.length+1)/5).trigger("change")}).find(".condition-field").prop("disabled",false).trigger("change");a("updateCount");function d(){e(".mailster-conditions").find(".datepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:mailsterL10n.start_of_week,showWeek:true,dayNames:mailsterL10n.day_names,dayNamesMin:mailsterL10n.day_names_min,monthNames:mailsterL10n.month_names,prevText:mailsterL10n.prev,nextText:mailsterL10n.next,showAnim:"fadeIn"})}function g(){var h=Array.prototype.slice.call(arguments),m=h.shift(),l=h.length,k;for(var j=0;j<l;j++){k=new RegExp("%("+(j+1)+"\\$)?(s|d|f)");m=m.replace(k,h[j])}return m}function a(){if(!window.Mailster){return}var i=jQuery.makeArray(arguments);var h=i.shift();window.Mailster.trigger(h,i)}});